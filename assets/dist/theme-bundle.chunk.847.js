"use strict";(self.webpackChunkbigcommerce_cornerstone=self.webpackChunkbigcommerce_cornerstone||[]).push([[847],{847:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v}),r(9693),r(228),r(7522),r(5728),r(1517),r(5399),r(1013),r(9730),r(24),r(2826),r(4284),r(7049),r(1694),r(4043),r(7409),r(9749),r(6544),r(4254),r(752),r(6265),r(3975);var o=r(2557),a=r(469),n=r(5825),i=r.n(n),s=r(8426),c=r(4587),l=r(6691),d=r(8575),u=r(8350),h=(r(1647),r(97)),p=r(2047);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}var v=function(e){var t,r;function a(){return e.apply(this,arguments)||this}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,f(t,r);var n=a.prototype;return n.formatCategoryTreeForJSTree=function(e){var t=this,r={text:e.data,id:e.metadata.id,state:{selected:e.selected}};return e.state&&(r.state.opened="open"===e.state,r.children=!0),e.children&&(r.children=[],e.children.forEach((function(e){r.children.push(t.formatCategoryTreeForJSTree(e))}))),r},n.showProducts=function(){var e=l.Z.replaceParams(window.location.href,{section:"product"});this.$productListingContainer.removeClass("u-hiddenVisually"),this.$contentResultsContainer.addClass("u-hiddenVisually"),i()("[data-content-results-toggle]").parent().removeClass("is-active"),i()("[data-content-results-toggle]").parent().addClass("navBar-action"),i()("[data-product-results-toggle]").parent().removeClass("navBar-action"),i()("[data-product-results-toggle]").parent().addClass("is-active"),l.Z.goToUrl(e)},n.showContent=function(){var e=l.Z.replaceParams(window.location.href,{section:"content"});this.$contentResultsContainer.removeClass("u-hiddenVisually"),this.$productListingContainer.addClass("u-hiddenVisually"),i()("[data-product-results-toggle]").parent().removeClass("is-active"),i()("[data-product-results-toggle]").parent().addClass("navBar-action"),i()("[data-content-results-toggle]").parent().removeClass("navBar-action"),i()("[data-content-results-toggle]").parent().addClass("is-active"),l.Z.goToUrl(e)},n.onReady=function(){var e=this;(0,c.Z)(this.context.urls);var t=i()("[data-advanced-search-form]"),r=t.find("[data-search-category-tree]"),a=d.parse(window.location.href,!0),n=[];this.$productListingContainer=i()("#product-listing-container"),this.$facetedSearchContainer=i()("#faceted-search-container"),this.$contentResultsContainer=i()("#search-results-content"),i()("#facetedSearch").length>0?this.initFacetedSearch():(this.onSortBySubmit=this.onSortBySubmit.bind(this),o.PT.on("sortBy-submitted",this.onSortBySubmit)),this.sidebar_mobile(),this.product_sidebar(),this.carouselLeftSidebar();var s=i()("[data-product-id]").val();(0,p.Z)(s),(0,u.ZP)(),i()("[data-product-results-toggle]").on("click",(function(t){t.preventDefault(),e.showProducts()})),i()("[data-content-results-toggle]").on("click",(function(t){t.preventDefault(),e.showContent()})),0===this.$productListingContainer.find("li.product").length||"content"===a.query.section?this.showContent():this.showProducts();var l=this.initValidation(t).bindValidation(t.find("#search_query_adv"));this.context.categoryTree.forEach((function(t){n.push(e.formatCategoryTreeForJSTree(t))})),this.categoryTreeData=n,this.createCategoryTree(r),t.on("submit",(function(e){var o=r.jstree().get_selected();if(!l.check())return e.preventDefault();t.find('input[name="category[]"]').remove();for(var a,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(o);!(a=n()).done;){var s=a.value,c=i()("<input>",{type:"hidden",name:"category[]",value:s});t.append(c)}}))},n.loadTreeNodes=function(e,t){var r=this;i().ajax({url:"/remote/v1/category-tree",data:{selectedCategoryId:e.id,prefix:"category"}}).done((function(e){var o=[];e.forEach((function(e){o.push(r.formatCategoryTreeForJSTree(e))})),t(o)}))},n.createCategoryTree=function(e){var t=this,r={core:{data:function(e,r){"#"===e.id?r(t.categoryTreeData):t.loadTreeNodes(e,r)},themes:{icons:!0}},checkbox:{three_state:!1},plugins:["checkbox"]};e.jstree(r)},n.initFacetedSearch=function(){var e=i()("#product-listing-container"),t=i()("#faceted-search-container"),r=i()("#search-results-heading"),o=i()("#search-results-product-count"),a={template:{productListing:"search/product-listing",sidebar:"search/sidebar",heading:"search/heading",productCount:"search/product-count"},config:{product_results:{limit:this.context.searchProductsPerPage}},showMore:"search/show-more"};this.facetedSearch=new s.Z(a,(function(a){e.html(a.productListing),t.html(a.sidebar),r.html(a.heading),o.html(a.productCount),i()("html, body").animate({scrollTop:0},100)}))},n.initValidation=function(e){return this.$form=e,this.validator=(0,h.Z)({submit:e}),this},n.bindValidation=function(e){return this.validator&&this.validator.add({selector:e,validate:"presence",errorMessage:e.data("errorMessage")}),this},n.check=function(){return!!this.validator&&(this.validator.performCheck(),this.validator.areAll("valid"))},n.sidebar_mobile=function(){i()(".page-sidebar").length>0&&(i()(".page-sidebar").clone().appendTo(i()("#sidebar-mobile .autoimex_MobileContent")),i()(document).on("click",".autoimex_sidebar-mobile",(function(e){i()("body").addClass("autoimex_open-Sidebar")})),i()("#sidebar-mobile .autoimex_close").on("click",(function(e){i()("body").removeClass("autoimex_open-Sidebar")})),i()(".bg-mobile").on("click",(function(e){i()("body").hasClass("autoimex_open-Sidebar")&&i()("body").removeClass("autoimex_open-Sidebar")})))},n.carouselLeftSidebar=function(){i()(".sidebarBlock .productCarousel").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,dots:!1,arrows:!0,autoplay:!0,autoplaySpeed:3e3,mobileFirst:!0,nextArrow:'<svg class="slick-next slick-arrow"><use xlink:href="#slick-arrow-next1"></use></svg>',prevArrow:'<svg class="slick-prev slick-arrow"><use xlink:href="#slick-arrow-prev1"></use></svg>',responsive:[{breakpoint:1025,settings:{slidesToShow:1,slidesToScroll:1,dots:!0,arrows:!0}}]})},n.product_sidebar=function(){i()(".all-categories-list").length>0&&i()(".all-categories-list .icon-dropdown").on("click",(function(){var e=i()(this).parent();e.siblings().removeClass("is-clicked"),e.toggleClass("is-clicked"),e.siblings().find("> .dropdown-category-list").slideUp("slow"),e.find("> .dropdown-category-list").slideToggle("slow")}))},a}(a.Z)}}]);
//# sourceMappingURL=theme-bundle.chunk.847.js.map